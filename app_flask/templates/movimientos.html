<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movimientos</title>

    <link rel="stylesheet" href="static/css/estilo.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
</head>

<body>
    <header class="header">
        <nav class="navbar">
            <a href="{{ url_for('inicio') }}" class="logo">
                <img src="static/img/myfinance.jpg" alt="Logo de My Finance">
            </a>
            <ul class="nav-links">
                <li><a href="{{ url_for('inicio') }}" class="nav-button">Inicio</a></li>
                <li><a href="{{ url_for('movimientos') }}" class="nav-button active">Movimientos</a></li>
                <li><a href="{{ url_for('inversiones') }}" class="nav-button">Inversiones</a></li>
                <li><a href="{{ url_for('perfil') }}" class="nav-button">Perfil</a></li>
            </ul>
        </nav>
    </header>

    <main class="main-content">
        <h2 class="page-title">Tus Movimientos</h2>

        <div class="transactions-header">
            <h3>Historial Detallado</h3>
            <div class="filter-actions">
                <select class="filter-select">
                    <option value="all">Todos</option>
                    <option value="income">Ingresos</option>
                    <option value="expense">Gastos</option>
                </select>
            </div>
        </div>

        <div class="saldo-disponible">
            <span>Saldo disponible en cuenta:</span> 
            <p>${{ saldo }}</p>
        </div>
        

        <section class="transactions-table">
            <table>
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Descripci√≥n</th>
                        <th class="amount-header">Monto</th>
                    </tr>
                </thead>

                <tbody id="transactionsBody">
                    {% if transacciones %}
                        {% for t in transacciones %}
                            <tr class="{{ 'income' if t.tipo == 'ingreso' else 'expense' }}">
                                <td>{{ t.fecha[:10] if t.fecha else '' }}</td>
                                <td>{{ t.descripcion }}</td>
                                <td class="amount-cell">
                                    {% if t.tipo == 'ingreso' %}
                                        +${{ "{:,.2f}".format(t.monto) }}
                                    {% else %}
                                        -${{ "{:,.2f}".format(t.monto|abs) }}
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    {% else %}
                        <tr>
                            <td colspan="3" style="text-align:center; color:#6C757D; padding:20px;">
                                No hay movimientos registrados.
                            </td>
                        </tr>
                    {% endif %}
                </tbody>
            </table>
        </section>
    </main>

   <script>
document.addEventListener("DOMContentLoaded", function() {

    const selector = document.querySelector(".filter-select");
    const rows = document.querySelectorAll("#transactionsBody tr");

    function aplicarFiltro() {
        const filtro = selector.value;

        rows.forEach(row => {
            if (filtro === "all") {
                row.style.display = "";
            }
            else if (filtro === "income" && row.classList.contains("income")) {
                row.style.display = "";
            }
            else if (filtro === "expense" && row.classList.contains("expense")) {
                row.style.display = "";
            }
            else {
                row.style.display = "none";
            }
        });
    }

    selector.addEventListener("change", aplicarFiltro);
    aplicarFiltro();
});
</script>


    <footer class="footer">
        <p>&copy; 2025 Finanzas App. Todos los derechos reservados.</p>
    </footer>




</body>
</html>
